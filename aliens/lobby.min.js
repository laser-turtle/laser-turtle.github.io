"use strict";let sendServerHost=function(e){return!1},sendServerJoin=function(e){return!1};var player_id=-1;function send_server_host(e){sendServerHost(e)}function send_server_join(e){sendServerJoin(e)}function make_player_block(e){var n=document.createElement("A");return n.className="panel-block",n.innerHTML=e,n}function insertAfter(e,n){e.parentNode.insertBefore(n,e.nextSibling)}function update_lobby(e){console.log(e),document.getElementById("player-count").innerHTML=e.players.length+"/"+e.max_players,document.getElementById("game-id").innerHTML=e.id;for(var n=document.getElementById("lobby-tabs");"lobby-modal-host-start"!=n.nextSibling.id;)n.nextSibling.parentNode.removeChild(n.nextSibling);console.log(n);for(var o=e.players.length-1;o>=0;--o){insertAfter(n,make_player_block(e.players[o]))}}function setupLobby(e,n,o,t){var a=new WebSocket("wss://"+o);a.onopen=function(o){a.send(JSON.stringify({type:"new-lobby",name:e,max_players:n}))},a.onmessage=function(e){console.log("SERVER MSG",e.data);let n=JSON.parse(e.data);switch(n.type){case"player-update":case"player-dropped":t(n);break;case"lobby-update":player_id=n.player_id,t({type:"player-list-update",players:n.data.players}),update_lobby(n.data)}},a.onclose=function(e){console.log("SERVER CONNECTION CLOSED")},sendServerHost=function(e){return a.readyState===WebSocket.OPEN&&(a.send(e),!0)}}function connectToLobby(e,n,o,t){var a=new WebSocket("ws://"+o);a.onopen=function(o){console.log("SERVER CONNECTED"),a.send(JSON.stringify({type:"join-lobby",game_id:n,name:e}))},a.onmessage=function(e){let o=JSON.parse(e.data);switch(console.log("SERVER MSG",o),o.type){case"lobby-update":player_id=o.player_id,update_lobby(o.data);break;case"game-update":console.log("Game Update"),t(o);break;case"lobby-full":console.log("Lobby is full");break;case"no-such-lobby":console.log("Invalid lobby "+n);break;default:console.log("Unknown message type")}},a.onclose=function(e){console.log("SERVER CONNECTION CLOSED")},sendServerJoin=function(e){return a.readyState===WebSocket.OPEN&&(a.send(e),!0)}}